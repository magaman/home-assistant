blueprint:
  name: "ğŸ‘¤âœ¨ Person Detected Light Control (v3.1.1)"
  description: >
    ğŸ“¦ Version: 3.1.1
    ğŸ”” Triggers when a person is detected between sunset and sunrise.
    ğŸ’¡ Turns on specified lights if they are off.
    â²ï¸ Turns off lights after a specified delay.

  domain: automation
  input:
    sensors:
      name: "ğŸ‘¤ Person Detection Sensors"
      selector:
        entity:
          domain: binary_sensor
          multiple: true

    lights:
      name: "ğŸ’¡ Lights to Control"
      selector:
        entity:
          domain: light
          multiple: true

    delay:
      name: "â±ï¸ Off Delay"
      description: Duration to wait before turning off the lights.
      default: "00:05:00"
      selector:
        duration: {}

mode: single
max_exceeded: silent

trigger:
  - platform: state
    entity_id: !input sensors
    to: "on"

condition:
  - condition: sun
    after: sunset
    before: sunrise

action:
  - service: light.turn_on
    target:
      entity_id: !input lights

  - delay: !input delay

  - service: light.turn_off
    target:
      entity_id: !input lights

